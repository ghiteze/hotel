!function(e){function t(t,i,a,n){var o=e();return e.each(r,function(e,r){if(r.height()>0){var s=r.offset().top,l=r.offset().left,u=l+r.width(),c=s+r.height(),d=!(l>i||u<n||s>a||c<t);d&&o.push(r)}}),o}function i(){++u;var i=o.scrollTop(),a=o.scrollLeft(),n=a+o.width(),r=i+o.height(),l=t(i+c.top+200,n+c.right,r+c.bottom,a+c.left);e.each(l,function(e,t){var i=t.data("scrollSpy:ticks");"number"!=typeof i&&t.triggerHandler("scrollSpy:enter"),t.data("scrollSpy:ticks",u)}),e.each(s,function(e,t){var i=t.data("scrollSpy:ticks");"number"==typeof i&&i!==u&&(t.triggerHandler("scrollSpy:exit"),t.data("scrollSpy:ticks",null))}),s=l}function a(){o.trigger("scrollSpy:winSize")}function n(e,t,i){var a,n,o,r=null,s=0;i||(i={});var l=function(){s=i.leading===!1?0:d(),r=null,o=e.apply(a,n),a=n=null};return function(){var u=d();s||i.leading!==!1||(s=u);var c=t-(u-s);return a=this,n=arguments,c<=0?(clearTimeout(r),r=null,s=u,o=e.apply(a,n),a=n=null):r||i.trailing===!1||(r=setTimeout(l,c)),o}}var o=e(window),r=[],s=[],l=!1,u=0,c={top:0,right:0,bottom:0,left:0},d=Date.now||function(){return(new Date).getTime()};e.scrollSpy=function(t,a){var s={throttle:100,scrollOffset:200};a=e.extend(s,a);var u=[];t=e(t),t.each(function(t,i){r.push(e(i)),e(i).data("scrollSpy:id",t),e('a[href="#'+e(i).attr("id")+'"]').click(function(t){t.preventDefault();var i=e(this.hash).offset().top+1;e("html, body").animate({scrollTop:i-a.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),c.top=a.offsetTop||0,c.right=a.offsetRight||0,c.bottom=a.offsetBottom||0,c.left=a.offsetLeft||0;var d=n(i,a.throttle||100),p=function(){e(document).ready(d)};return l||(o.on("scroll",p),o.on("resize",p),l=!0),setTimeout(p,0),t.on("scrollSpy:enter",function(){u=e.grep(u,function(e){return 0!=e.height()});var t=e(this);u[0]?(e('a[href="#'+u[0].attr("id")+'"]').removeClass("active"),t.data("scrollSpy:id")<u[0].data("scrollSpy:id")?u.unshift(e(this)):u.push(e(this))):u.push(e(this)),e('a[href="#'+u[0].attr("id")+'"]').addClass("active")}),t.on("scrollSpy:exit",function(){if(u=e.grep(u,function(e){return 0!=e.height()}),u[0]){e('a[href="#'+u[0].attr("id")+'"]').removeClass("active");var t=e(this);u=e.grep(u,function(e){return e.attr("id")!=t.attr("id")}),u[0]&&e('a[href="#'+u[0].attr("id")+'"]').addClass("active")}}),t},e.winSizeSpy=function(t){return e.winSizeSpy=function(){return o},t=t||{throttle:100},o.on("resize",n(a,t.throttle||100))},e.fn.scrollSpy=function(t){return e.scrollSpy(e(this),t)}}(jQuery);