!function(e){var t=0,i=0,a=function(){return i++,"materialize-lean-overlay-"+i};e.fn.extend({openModal:function(i){var n=e("body"),o=n.innerWidth();n.css("overflow","hidden"),n.width(o);var r={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%",ending_top:"10%"},s=e(this);if(!s.hasClass("open")){var l=a(),u=e('<div class="lean-overlay"></div>');lStack=++t,u.attr("id",l).css("z-index",1e3+2*lStack),s.data("overlay-id",l).css("z-index",1e3+2*lStack+1),s.addClass("open"),e("body").append(u),i=e.extend(r,i),i.dismissible&&(u.click(function(){s.closeModal(i)}),e(document).on("keyup.leanModal"+l,function(e){27===e.keyCode&&s.closeModal(i)})),s.find(".modal-close").on("click.close",function(){s.closeModal(i)}),u.css({display:"block",opacity:0}),s.css({display:"block",opacity:0}),u.velocity({opacity:i.opacity},{duration:i.in_duration,queue:!1,ease:"easeOutCubic"}),s.data("associated-overlay",u[0]),s.hasClass("bottom-sheet")?s.velocity({bottom:"0",opacity:1},{duration:i.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof i.ready&&i.ready()}}):(e.Velocity.hook(s,"scaleX",.7),s.css({top:i.starting_top}),s.velocity({top:i.ending_top,opacity:1,scaleX:"1"},{duration:i.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof i.ready&&i.ready()}}))}}}),e.fn.extend({closeModal:function(i){var a={out_duration:250,complete:void 0},n=e(this),o=n.data("overlay-id"),r=e("#"+o);n.removeClass("open"),i=e.extend(a,i),e("body").css({overflow:"",width:""}),n.find(".modal-close").off("click.close"),e(document).off("keyup.leanModal"+o),r.velocity({opacity:0},{duration:i.out_duration,queue:!1,ease:"easeOutQuart"}),n.hasClass("bottom-sheet")?n.velocity({bottom:"-100%",opacity:0},{duration:i.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){r.css({display:"none"}),"function"==typeof i.complete&&i.complete(),r.remove(),t--}}):n.velocity({top:i.starting_top,opacity:0,scaleX:.7},{duration:i.out_duration,complete:function(){e(this).css("display","none"),"function"==typeof i.complete&&i.complete(),r.remove(),t--}})}}),e.fn.extend({leanModal:function(t){return this.each(function(){var i={starting_top:"4%"},a=e.extend(i,t);e(this).click(function(t){a.starting_top=(e(this).offset().top-e(window).scrollTop())/1.15;var i=e(this).attr("href")||"#"+e(this).data("target");e(i).openModal(a),t.preventDefault()})})}})}(jQuery);